{"blocks":[{"x":700,"y":190,"text":"Проверяем, являются\nли баркоды уникальными\nдля каждого чека","width":240,"height":100,"type":"Условие","isMenuBlock":false,"fontSize":14,"textHeight":14,"isBold":false,"isItalic":false,"textAlign":"center","labelsPosition":1},{"x":920,"y":260,"text":"Создаём новую строку\nnewRow = getNewRow()","width":320,"height":40,"type":"Блок","isMenuBlock":false,"fontSize":14,"textHeight":14,"isBold":false,"isItalic":false,"textAlign":"center","labelsPosition":1},{"x":450,"y":400,"text":"Находим rowIndex индекс строки в BD, который \nудовлетворяет условию\nevent_id == activeEvent.id\n\nnewRow = BD[rowIndex]","width":320,"height":80,"type":"Блок","isMenuBlock":false,"fontSize":14,"textHeight":14,"isBold":false,"isItalic":false,"textAlign":"center","labelsPosition":1},{"x":920,"y":400,"text":"Увеличиваем конкретный тип билета для \nnewRow\n\nnewRow.setQuantity(\nticket.type, \nnewRow.getQuantity(ticket.type) + 1)\n)","width":320,"height":100,"type":"Блок","isMenuBlock":false,"fontSize":14,"textHeight":14,"isBold":false,"isItalic":false,"textAlign":"center","labelsPosition":1},{"x":450,"y":260,"text":"Проверяем созданна ли \nстрока с event_id\nТаким же с каким \nбыл нажат counter","width":320,"height":120,"type":"Условие","isMenuBlock":false,"fontSize":14,"textHeight":14,"isBold":false,"isItalic":false,"textAlign":"center","labelsPosition":4},{"x":920,"y":510,"text":"Подсчитать общую соимость всех билетов\nnewRow.calculateEqualPrice()","width":320,"height":40,"type":"Блок","isMenuBlock":false,"fontSize":14,"textHeight":14,"isBold":false,"isItalic":false,"textAlign":"center","labelsPosition":1},{"x":950,"y":860,"text":"изменяем состояние BD\n\nsetBD([...BD])","width":320,"height":60,"type":"Блок","isMenuBlock":false,"fontSize":14,"textHeight":14,"isBold":false,"isItalic":false,"textAlign":"center","labelsPosition":1},{"x":950,"y":930,"text":"конец","width":100,"height":30,"type":"Начало / конец","isMenuBlock":false,"fontSize":14,"textHeight":14,"isBold":false,"isItalic":false,"textAlign":"center","labelsPosition":1},{"x":1180,"y":710,"text":"Добавялем строку в BD\n\nBD.push(newRow)","width":320,"height":60,"type":"Блок","isMenuBlock":false,"fontSize":14,"textHeight":14,"isBold":false,"isItalic":false,"textAlign":"center","labelsPosition":1},{"x":670,"y":710,"text":"Подменяем существующую строку в BD \nна модифицированную\n\nBD[rowIndex] = newRow","width":320,"height":60,"type":"Блок","isMenuBlock":false,"fontSize":14,"textHeight":14,"isBold":false,"isItalic":false,"textAlign":"center","labelsPosition":1},{"x":920,"y":610,"text":"Новая строка не создавалась, т.е.\nrowIndex == -1","width":320,"height":80,"type":"Условие","isMenuBlock":false,"fontSize":14,"textHeight":14,"isBold":false,"isItalic":false,"textAlign":"center","labelsPosition":1},{"x":700,"y":100,"text":"button \"+\" click","width":100,"height":30,"type":"Начало / конец","isMenuBlock":false,"fontSize":14,"textHeight":14,"isBold":false,"isItalic":false,"textAlign":"center","labelsPosition":1}],"arrows":[{"startIndex":11,"endIndex":0,"startConnectorIndex":2,"endConnectorIndex":0,"nodes":[{"x":700,"y":115},{"x":700,"y":120},{"x":700,"y":140}],"counts":[1,1,1]},{"startIndex":0,"endIndex":1,"startConnectorIndex":1,"endConnectorIndex":0,"nodes":[{"x":820,"y":190},{"x":920,"y":190},{"x":920,"y":220},{"x":920,"y":240}],"counts":[1,1,1,1]},{"startIndex":0,"endIndex":4,"startConnectorIndex":3,"endConnectorIndex":0,"nodes":[{"x":580,"y":190},{"x":450,"y":190},{"x":450,"y":200}],"counts":[1,1,1]},{"startIndex":4,"endIndex":1,"startConnectorIndex":1,"endConnectorIndex":3,"nodes":[{"x":610,"y":260},{"x":740,"y":260},{"x":760,"y":260}],"counts":[1,1,1]},{"startIndex":4,"endIndex":2,"startConnectorIndex":2,"endConnectorIndex":0,"nodes":[{"x":450,"y":320},{"x":450,"y":340},{"x":450,"y":360}],"counts":[1,1,1]},{"startIndex":1,"endIndex":3,"startConnectorIndex":2,"endConnectorIndex":0,"nodes":[{"x":920,"y":280},{"x":920,"y":330},{"x":920,"y":350}],"counts":[1,1,1]},{"startIndex":2,"endIndex":3,"startConnectorIndex":1,"endConnectorIndex":3,"nodes":[{"x":610,"y":400},{"x":740,"y":400},{"x":760,"y":400}],"counts":[1,1,1]},{"startIndex":3,"endIndex":5,"startConnectorIndex":2,"endConnectorIndex":0,"nodes":[{"x":920,"y":450},{"x":920,"y":470},{"x":920,"y":490}],"counts":[1,1,1]},{"startIndex":5,"endIndex":10,"startConnectorIndex":2,"endConnectorIndex":0,"nodes":[{"x":920,"y":530},{"x":920,"y":550},{"x":920,"y":570}],"counts":[1,1,1]},{"startIndex":8,"endIndex":6,"startConnectorIndex":2,"endConnectorIndex":0,"nodes":[{"x":1180,"y":740},{"x":1180,"y":810},{"x":950,"y":810},{"x":950,"y":830}],"counts":[1,1,1,1]},{"startIndex":6,"endIndex":7,"startConnectorIndex":2,"endConnectorIndex":0,"nodes":[{"x":950,"y":890},{"x":950,"y":900},{"x":950,"y":915}],"counts":[1,1,1]},{"startIndex":9,"endIndex":6,"startConnectorIndex":2,"endConnectorIndex":0,"nodes":[{"x":670,"y":740},{"x":670,"y":810},{"x":950,"y":810},{"x":950,"y":830}],"counts":[1,1,1,1]},{"startIndex":10,"endIndex":8,"startConnectorIndex":1,"endConnectorIndex":0,"nodes":[{"x":1080,"y":610},{"x":1180,"y":610},{"x":1180,"y":660},{"x":1180,"y":680}],"counts":[1,1,1,1]},{"startIndex":10,"endIndex":9,"startConnectorIndex":3,"endConnectorIndex":0,"nodes":[{"x":760,"y":610},{"x":670,"y":610},{"x":670,"y":660},{"x":670,"y":680}],"counts":[1,1,1,1]}],"x0":-183,"y0":79}